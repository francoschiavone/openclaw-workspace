# Eclipse Mosquitto Configuration for Digital Twins Platform

# Persistence settings
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type all
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# Listener configuration
# MQTT on port 1883 (no authentication for development)
listener 1883
allow_anonymous true

# WebSocket listener on port 9001
listener 9001
protocol websockets
allow_anonymous true

# Connection limits
max_connections -1
max_queued_messages 1000
max_queued_bytes 0

# Keepalive settings
keepalive_interval 60

# Session persistence
persistent_client_expiration 1d

# Topic patterns for digital twins
# devices/{device-id}/twin/events
# devices/{device-id}/twin/commands
# devices/{device-id}/telemetry
